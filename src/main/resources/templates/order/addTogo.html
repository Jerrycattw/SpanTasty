<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8">
    <title>æ–°å¢è¨‚å–®</title>
</head>

<body>
    <div th:replace="~{display/navbar}"></div>
    <div class="content">
        <div class="container mt-1">
            <h1 class="display-6">ğŸ“æ–°å¢è¨‚å–®ğŸ“</h1>
            <form id="togoForm" class="row g-3 mt-1">
                <div class="col-md-4">
                    <label for="memberId" class="form-label">æœƒå“¡ç·¨è™Ÿ</label>
                    <input type="text" class="form-control" id="memberId">
                </div>
                <div class="col-md-4">
                    <label for="tgName" class="form-label">å§“å</label>
                    <input type="text" class="form-control" id="tgName">
                </div>
                <div class="col-md-4">
                    <label for="tgPhone" class="form-label">é›»è©±</label>
                    <input type="text" class="form-control" id="tgPhone">
                </div>
                <div class="col-md-4">
                    <label for="rentId" class="form-label">ç§Ÿå€Ÿå–®è™Ÿ</label>
                    <input type="text" class="form-control" id="rentId">
                </div>
                <div class="col-md-4">
                    <label for="restaurantId" class="form-label">å–é¤é¤å»³</label>
                    <select name="restaurantId" id="restaurantId" class="form-select" required>
                        <option value="" selected>è«‹é¸æ“‡é¤å»³</option>
                        <th:block th:each="restaurant : ${restaurants}">
                            <option th:value="${restaurant.restaurantId}" th:text="${restaurant.restaurantName}">
                            </option>
                        </th:block>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="togoStatus" class="form-label">å–é¤ç‹€æ…‹</label>
                    <select class="form-select" id="togoStatus" aria-label="Default select example">
                        <option selected value="">è«‹é¸æ“‡</option>
                        <option value="1">æœªå–é¤</option>
                        <option value="2">å·²å–é¤</option>
                        <option value="3">å·²å–æ¶ˆ</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="togoMemo" class="form-label">è¨‚å–®å‚™è¨»</label>
                    <textarea class="form-control" id="togoMemo" rows="3"></textarea>
                </div>
                <div class="col-12 d-flex justify-content-center">
                    <button type="submit" id="addBtn " class="btn btn-primary">è¨‚å–®æäº¤</button>
                    <a href="http://localhost:8080/SpanTasty/order/togo" class="btn btn-secondary ms-2">è¿”å›å…¨éƒ¨</a>
                </div>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            showSidebar('order');

            document.getElementById("togoForm").addEventListener("submit", function (event) {
                event.preventDefault();
                // è¡¨å–®æ•¸æ“š
                const newTogo = {
                    memberId: document.getElementById("memberId").value,
                    tgName: document.getElementById("tgName").value,
                    tgPhone: document.getElementById("tgPhone").value,
                    rentId: document.getElementById("rentId").value,
                    restaurantId: document.getElementById("restaurantId").value,
                    togoStatus: document.getElementById("togoStatus").value,
                    togoMemo: document.getElementById("togoMemo").value
                };

                // ç™¼é€ POST è«‹æ±‚
                axios.post('http://localhost:8080/SpanTasty/order/togo', newTogo)
                    .then(function (response) {
                        console.log(response.data);
                        alert("è¨‚å–®å·²æˆåŠŸæäº¤ï¼");
                        //æäº¤å¾Œå›åˆ°getAllTogo
                        window.location.href = 'http://localhost:8080/SpanTasty/order/togo';
                    })
                    .catch(function (error) {
                        console.error("æäº¤è¨‚å–®æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š", error);
                        alert("æäº¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
                    })
            })
        })




    </script>
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/axios.min.js}"></script>
</body>
</html>