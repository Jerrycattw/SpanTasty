<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
</head>

<body>
    <div th:replace="~{/display/navbar}"></div>
    <div class="content">
        <div class="container">
            <form id="couponForm" action="/SpanTasty/coupon/add" method="post" >
            <div class="h1 mb-3">新增優惠券</div>
            <div class="accordion " id="accordionPanelsStayOpenExample">
                <!-- 1 -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button bg-light" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseOne">
                            基本設定
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
                        <!-- body1 -->
                        <div class="accordion-body">
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3 align-items-center">
                                    優惠券編號
                                </div>
                                <div class="col-9">
                                    <input class="form-control" type="text" placeholder="系統自動產生"
                                        aria-label="default input example" disabled>
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3 align-items-center">
                                    優惠券代碼
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="couponCode" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    優惠券名稱
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="couponDescription" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    使用開始日期
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="couponStartDate" type="date" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    使用結束日期
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="couponEndDate" type="date" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    狀態
                                </div>
                                <div class="col-9">
                                    <select class="form-select" name="couponStatus" aria-label="Default select example">
                                        <option value="上架">上架</option>
                                        <option value="下架">下架</option>
                                    </select>
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    折扣種類
                                </div>
                                <div class="col-9">
                                    <select class="form-select" name="discountType" aria-label="Default select example">
                                        <option value="固定金額">固定金額</option>
                                        <option value="百分比">百分比</option>
                                    </select>
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    <div data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="百分比8折請填80">
                                        折扣金額<i class="fa-regular fa-circle-question ms-2"></i>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="discount" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    優惠描述
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="rulesDescription" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!--  -->
                <div class="accordion-item">
                    <h2 class="accordion-header ">
                        <button class="accordion-button collapsed bg-light" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseTwo">
                            進階設定
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
                        <!--  -->
                        <div class="accordion-body">
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    優惠券數量
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="maxCoupon" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    每人限領數量
                                </div>
                                <div class="col-9">
                                    <input class="form-control"  name="perMaxCoupon" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    <div data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="消費滿額才能使用">
                                        最低消費金額<i class="fa-regular fa-circle-question ms-2"></i>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="minOrderDiscount" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3">
                                    <div data-bs-toggle="tooltip" data-bs-placement="left" data-bs-title="單筆消費最大折扣金額">
                                        最大折扣金額<i class="fa-regular fa-circle-question ms-2"></i>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <input class="form-control" name="maxDiscount" type="text" placeholder=""
                                        aria-label="default input example">
                                </div>
                            </div>
                            <!--  -->
                            <div class="row">
                                <div class="col">綁定標籤 :</div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3 d-flex justify-content-end"><label>( 商城 )</label></div>
                                <div class="col" id="productTags">
                                    <!-- <div class="form-check form-check-inline">
                         <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                         <label class="form-check-label" for="inlineCheckbox1">1</label>
                     </div>-->
                                </div>
                            </div>
                            <!--  -->
                            <div class="row mb-3 me-auto">
                                <div class="col-3 d-flex justify-content-end"><label>( 訂餐 )</label></div>
                                <div class="col" id="togoTags">
                                    <!-- <div class="form-check form-check-inline">
                         <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                         <label class="form-check-label" for="inlineCheckbox1">1</label>
                     </div> -->
                                </div>
                            </div>
                            <!--  -->
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <div class="card-footer d-flex justify-content-end">
                        <div class="m-3">
                            <button  id="backBtn" type="button" class="btn btn-secondary me-2">返回</button>
                            <button type="submit" class="btn btn-primary me-2">新增</button>
                        </div>
                    </div>
                </div>
                </div>
                </form>
                </div>
                </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            //載入tagoption
            axios.get('/SpanTasty/coupon/api/preadd')
                .then(res => {

                    res.data.product.forEach(element => {
                        document.getElementById('productTags').innerHTML += `
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="${element}" value="${element}" name="product">
                <label class="form-check-label" for="${element}">${element}</label>
            </div>`
                    });
                    res.data.togo.forEach(element => {
                        document.getElementById('togoTags').innerHTML += `
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="${element}" value="${element}" name="togo">
                <label class="form-check-label" for="${element}">${element}</label>
            </div>`
                    });
                })
                .catch(err => {
                    console.log("err: " + err)
                })

            //載入bootstrap
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))

            //navbar
            showSidebar('points');



        })


    </script>
    <script>
        document.getElementById('backBtn').addEventListener('click',()=>{
            window.location.href='/SpanTasty/coupon'
        })
    </script>

</body>

</html>