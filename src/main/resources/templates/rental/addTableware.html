<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>新增環保用具</title>
<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
<style>
#card-warning {
	background-color: #ffd966;
}

.h {
	text-align: center;
}

form {
	width: 60%;
	margin: 0 auto;
	padding: 20px;
	border-radius: 10px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	background-color: #ffd966;
}
.tableware-input{
	width: 86%;
	padding: 5px;
	margin-bottom: 0px;
	border: 1px solid #ccc;
	border-radius: 5px;
	box-sizing: border-box;
}
.stock-entry {
	display: flex;
	align-items: center;
	margin-bottom: 0px;
	
}
.restaurant-select, .stock-input {
    width: 200px; /* 根據需要調整寬度 */
    margin-left: 0px;
    padding: 0px;
    height: 30px;
    width: 100%;
}
.stock-column{
	width: 220px;
	margin-left: 10px;
	padding: 0px;
}
.delete-button{
	background-color: #fff;
    border: 2px solid #000;
    padding: 0px 10px;
    cursor: pointer;
    margin-left: 10px;
    display: flex;
    align-items: center;
    justify-content: center; /* 讓文字在按鈕內居中 */
    height: 30px;
}



</style>
</head>
<body>
<div th:replace="~{display/navbar}" ></div>

<div class="content" id="container">
        <h3 class="h">輸入環保用具資料</h3>
        <div>
	        <form method="post" th:action="@{/tableware/addPost}" enctype="multipart/form-data">
	        <table class="table table-warning w-100 table-striped" id="table">
	            <tr><td>用具名稱: <input class="tableware-input" type="text" name="tablewareName" /></td></tr>
	            <tr><td>押金金額: <input class="tableware-input" type="text" name="tablewareDeposit" /></td></tr>
	            <tr><td>用具圖片: <input class="tableware-input" type="file" name="timg" /></td></tr>
	            <tr><td>用具描述: <input class="tableware-input" type="text" name="tablewareDescription"/></td></tr>
	        </table>
	        
	        <div id="stock-container">
	            <h4 class="h">輸入餐廳庫存資料</h4>
	            <div class="stock-entry" >
			    <table class="table table-warning table-striped">
			        <tr>
			            <td class="stock-column">餐廳名稱:
			                <select name="restaurantId" class="restaurant-select">
			                    <option value="" selected disabled>請選擇租借餐廳</option>
			                    <option th:each="restaurant : ${restaurants}" th:value="${restaurant.restaurantId}" th:text="${restaurant.restaurantName}"></option>
			                </select>
			            </td>
			            <td class="stock-column">用具庫存: <input type="number" name="stock" class="stock-input" /></td>
			            <td class="stock-column"><br/><button type="button" class="delete-button" onclick="removeStockEntry(this)">刪除</button></td>
			        </tr>
			    </table>
				</div>
			</div>
			
			<button type="button" id="add-stock-button" >添加庫存</button>
			<button type="submit">新增餐具</button>
			</form>
		</div>
</div>
    <script>
		document.addEventListener("DOMContentLoaded", function() {
			showSidebar('rental');
		});
	</script>
	<script type="text/template" id="restaurant-options-template">
    	<option value="" selected disabled>請選擇租借餐廳</option>
    	<option th:each="restaurant : ${restaurants}" th:value="${restaurant.restaurantId}" th:text="${restaurant.restaurantName}"></option>
	</script>
    <script>
let stockIndex = 0; // 初始化庫存索引

// 監聽「添加庫存」按鈕
document.getElementById('add-stock-button').addEventListener('click', function() {
    stockIndex++; // 增加索引
	const optionsTemplate = document.getElementById('restaurant-options-template').innerHTML;
    // 新的庫存輸入框 HTML 結構
    const stockEntryHtml = `
        <div class="stock-entry">
            <table class="table table-warning table-striped">
                <tr>
                    <td class="stock-column">餐廳名稱:
                        <select name="restaurantId[${stockIndex}]" class="restaurant-select">
                            ${optionsTemplate}
                        </select>
                    </td>
                    <td class="stock-column">用具庫存: <input type="number" name="stock[${stockIndex}]" class="stock-input" /></td>
                    <td class="stock-column"><br/><button type="button" class="delete-button" onclick="removeStockEntry(this)">刪除</button></td>
                </tr>
            </table>
        </div>
    `;

    // 在 stock-container 下方插入新的 div
    document.getElementById('stock-container').insertAdjacentHTML('beforeend', stockEntryHtml);
});

// 刪除庫存行
function removeStockEntry(button) {
    button.closest('.stock-entry').remove();
}
</script>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/jquery-3.7.1.min.js}"></script>
<script th:src="@{/js/axios.min.js}"></script>
</body>
</html>