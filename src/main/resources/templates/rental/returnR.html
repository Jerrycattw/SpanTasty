<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歸還環保用具</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
</head>

<body>
    <div th:replace="~{display/navbar}"></div>
    <div class="container" id="container">
        <h2>輸 入 歸 還 資 料</h2>
        <form th:action="@{/rent/update}" th:object="${rent}" method="post">
	    <input type="hidden" name="_method" value="put" />
	   	<table class="table table-warning table-striped" id="table">
	        <tr>
	            <td>訂單編號: <input type="text" th:field="*{rentId}" readonly></td>
	        </tr>
	        <tr>
	            <td>歸還日期: <input type="date" th:field="*{returnDate}" readonly /></td>
	        </tr>
	        <tr>
	            <td>
	                歸還餐廳:
	                <select th:field="*{returnRestaurantId}" id="return_restaurant_id">
	                    <option value="" selected disabled>請選擇租借餐廳</option>
	                    <option th:each="restaurant : ${restaurants}" th:value="${restaurant.restaurantId}" th:text="${restaurant.restaurantName}"></option>
	                </select>
					<p id="disabledMsg" style="color: red; display: none;">訂單已完全歸還，無法再更改。</p>
	            </td>
	        </tr>
    	</table>
	    <input type="submit" id="submitBtn" value="確定歸還"/>
		</form>
    </div>
    <script>
    	window.onload = function() {
		    const returnRestaurantId = document.getElementById('return_restaurant_id');
        	const submitBtn = document.getElementById('submitBtn');
	        if (returnRestaurantId.value !== "") {
	            submitBtn.disabled = true;
	            returnRestaurantId.disabled = true;
	            document.getElementById('disabledMsg').style.display = 'block';
	        }
		};
    </script>
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/axios.min.js}"></script>
</body>

</html>